using PhishingApp.Model;
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Security.Policy;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;

namespace PhishingApp.Views
{
	/// <summary>
	/// Interaction logic for ExploitedVictimsWindow.xaml
	/// </summary>
	public partial class ExploitedVictimsWindow : Window
	{
		public ExploitedVictimsWindow()
		{
			InitializeComponent();

			List<VictimModel> victims = new List<VictimModel>();

			string line = string.Empty;
			string[] tokens = null;
			using (StreamReader sr = new StreamReader("database.txt"))
			{
				while ((line = sr.ReadLine()) != null)
				{
					if (line != string.Empty)
					{
						tokens = line.Split(';');
						victims.Add(new VictimModel(tokens[0], tokens[1], DateTime.Parse(tokens[2])));
					}
				}
			}


				McDataGrid.ItemsSource = victims;
		}
	}
}
